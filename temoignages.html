<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Témoignages — Amitié Canine</title>
  <meta name="description" content="Témoignages — Amitié Canine. Avis et retours d'expérience." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Charm:wght@400;700&family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="page">

    <!-- Décor feuillage -->
    <div class="leaves" aria-hidden="true">
      <img class="leaf tl" src="assets/leaf_transparent.png" alt="">
      <img class="leaf tr" src="assets/leaf_transparent.png" alt="">
      <img class="leaf bl" src="assets/leaf_transparent.png" alt="">
      <img class="leaf br" src="assets/leaf_transparent.png" alt="">
    </div>

    <!-- Trace de pattes (discrète) -->
    <div class="paw-trail" aria-hidden="true"></div>

    <header class="header">
      <div class="container header__inner">
        <div class="logo">
          <img src="assets/logo-banniere.png" alt="Amitié Canine — Éducation, Balade, Garde">
        </div>
      </div>
    </header>

    <div class="navwrap">
      <div class="container">
        <nav class="nav" aria-label="Navigation principale">
          <a class="nav__link" href="index.html">Accueil</a>
          <a class="nav__link" href="presentation.html">Présentation</a>
          <a class="nav__link" href="education.html">Éducation</a>
          <a class="nav__link" href="balades.html">Balades</a>
          <a class="nav__link" href="garde.html">Garde</a>
          <a class="nav__link is-active" href="temoignages.html">Témoignages</a>
          <a class="nav__link" href="localisation.html">Localisation</a>
          <a class="nav__link" href="contact.html">Contact</a>
        </nav>
      </div>
    </div>

    <!-- Background photo + carousel -->
    <section
      class="background-section background-section--small testimonials-hero"
      aria-label="Témoignages"
      style="background-image:url('assets/forest.jpeg');"
    >
      <div class="background-overlay" aria-hidden="true"></div>

      <div class="container background-content testimonials-hero__content">

        <div class="testimonials reveal" aria-label="Carrousel de témoignages">
          <div class="testimonials__top">
            <p class="hero__kicker">Avis</p>
            <h1 class="hero__title">Ils en parlent le mieux</h1>
          </div>

          <div class="t-carousel" data-carousel>

            <button class="t-nav t-nav--prev" type="button" aria-label="Témoignage précédent" data-prev>‹</button>
            <button class="t-nav t-nav--next" type="button" aria-label="Témoignage suivant" data-next>›</button>

            <div class="t-viewport" data-viewport>
              <div class="t-track" data-track>

                <!-- SLIDE 1 (réel paraphrasé) -->
                <article class="t-slide" data-slide>
                  <div class="t-media">
                    <img src="assets/tem-1.jpg" alt="Photo du chien Oak (exemple)">
                  </div>
                  <div class="t-card">
                    <p class="t-title">Oak</p>
                    <p class="t-text">
                      Garde longue durée (15 jours) : Oak a passé de super “vacances”.
                      Nouvelles et vidéos régulières, organisation au top, et un compte-rendu
                      très utile après la garde. Recommandé sans hésiter.
                    </p>
                  </div>
                </article>

                <!-- SLIDE 2 (placeholder à remplacer) -->
                <article class="t-slide" data-slide>
                  <div class="t-media">
                    <img src="assets/tem-2.jpg" alt="Photo témoignage (exemple)">
                  </div>
                  <div class="t-card">
                    <p class="t-title">[Nom / Chien]</p>
                    <p class="t-text">
                      [Colle ici le témoignage 2 depuis la page avis — texte court, lisible, pro.]
                    </p>
                  </div>
                </article>

                <!-- SLIDE 3 -->
                <article class="t-slide" data-slide>
                  <div class="t-media">
                    <img src="assets/tem-3.jpg" alt="Photo témoignage (exemple)">
                  </div>
                  <div class="t-card">
                    <p class="t-title">[Nom / Chien]</p>
                    <p class="t-text">
                      [Colle ici le témoignage 3.]
                    </p>
                  </div>
                </article>

                <!-- SLIDE 4 -->
                <article class="t-slide" data-slide>
                  <div class="t-media">
                    <img src="assets/tem-4.jpg" alt="Photo témoignage (exemple)">
                  </div>
                  <div class="t-card">
                    <p class="t-title">[Nom / Chien]</p>
                    <p class="t-text">
                      [Colle ici le témoignage 4.]
                    </p>
                  </div>
                </article>

                <!-- SLIDE 5 -->
                <article class="t-slide" data-slide>
                  <div class="t-media">
                    <img src="assets/tem-5.jpg" alt="Photo témoignage (exemple)">
                  </div>
                  <div class="t-card">
                    <p class="t-title">[Nom / Chien]</p>
                    <p class="t-text">
                      [Colle ici le témoignage 5.]
                    </p>
                  </div>
                </article>

              </div>
            </div>

            <div class="t-dots" role="tablist" aria-label="Sélection de témoignage" data-dots></div>
          </div>

          <div class="testimonials__cta">
            <a class="btn" href="contact.html">Me contacter</a>
            <a class="btn btn--ghost" href="garde.html">Voir la garde</a>
          </div>
        </div>

      </div>
    </section>

    <footer class="footer">
      <div class="container footer__inner">
        <p class="footer__text">© <span id="year"></span> Amitié Canine — Éducateur canin comportementaliste</p>
      </div>
    </footer>

  </div>

  <script>
    // année automatique
    const y = document.getElementById("year");
    if (y) y.textContent = new Date().getFullYear();

    // reveal
    const els = document.querySelectorAll(".reveal");
    const io = new IntersectionObserver((entries) => {
      for (const e of entries) {
        if (e.isIntersecting) {
          e.target.classList.add("is-visible");
          io.unobserve(e.target);
        }
      }
    }, { threshold: 0.18 });
    els.forEach(el => io.observe(el));

    // carousel
    (function () {
      const root = document.querySelector("[data-carousel]");
      if (!root) return;

      const track = root.querySelector("[data-track]");
      const slides = Array.from(root.querySelectorAll("[data-slide]"));
      const btnPrev = root.querySelector("[data-prev]");
      const btnNext = root.querySelector("[data-next]");
      const dotsWrap = root.querySelector("[data-dots]");
      const viewport = root.querySelector("[data-viewport]");

      let index = 0;

      // build dots
      const dots = slides.map((_, i) => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "t-dot";
        b.setAttribute("role", "tab");
        b.setAttribute("aria-label", `Aller au témoignage ${i + 1}`);
        b.addEventListener("click", () => go(i));
        dotsWrap.appendChild(b);
        return b;
      });

      function clamp(i) {
        if (i < 0) return slides.length - 1;
        if (i >= slides.length) return 0;
        return i;
      }

      function go(i) {
        index = clamp(i);
        track.style.transform = `translateX(${-index * 100}%)`;

        dots.forEach((d, di) => d.classList.toggle("is-active", di === index));
        btnPrev.disabled = slides.length <= 1;
        btnNext.disabled = slides.length <= 1;
      }

      btnPrev?.addEventListener("click", () => go(index - 1));
      btnNext?.addEventListener("click", () => go(index + 1));

      // keyboard
      root.addEventListener("keydown", (e) => {
        if (e.key === "ArrowLeft") go(index - 1);
        if (e.key === "ArrowRight") go(index + 1);
      });
      root.tabIndex = 0;

      // swipe (mobile)
      let startX = 0, dx = 0, dragging = false;

      viewport.addEventListener("pointerdown", (e) => {
        dragging = true;
        startX = e.clientX;
        dx = 0;
        viewport.setPointerCapture(e.pointerId);
      });

      viewport.addEventListener("pointermove", (e) => {
        if (!dragging) return;
        dx = e.clientX - startX;
      });

      viewport.addEventListener("pointerup", () => {
        if (!dragging) return;
        dragging = false;
        if (Math.abs(dx) > 50) go(index + (dx < 0 ? 1 : -1));
      });

      go(0);
    })();
  </script>
</body>
</html>
